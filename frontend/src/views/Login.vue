<template>
  <div class="login-box card">
    <h3>ğŸ”’ ç™»å½•</h3>
    <input v-model="pwd" type="password" placeholder="è¯·è¾“å…¥å¯†ç " @keyup.enter="doLogin" />
    <button class="btn" @click="doLogin">ç™»å½•</button>
    <p v-if="err" class="tag-red" style="margin-top:8px;font-size:13px">{{ err }}</p>
  </div>
</template>

<script setup>
import { ref } from 'vue'
import { useRouter } from 'vue-router'
import { useAuthStore } from '../stores/auth'

const pwd = ref('')
const err = ref('')
const router = useRouter()
const auth = useAuthStore()

async function doLogin() {
  try { await auth.login(pwd.value); router.push('/') }
  catch { err.value = 'å¯†ç é”™è¯¯' }
}
</script>
